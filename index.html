<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>MyBlog</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="MyBlog" type="application/atom+xml">
    
<meta name="generator" content="Hexo 6.1.0"></head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/archives" class="header__link">Archive</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">MyBlog</a></h1>
		<h2 class="header__subtitle">READ&LEARNING&LIFE&PHOTOGRAPHY</h2>
	</header>

	<main>
		



	<article>
	
		<h1><a href="/2022/04/30/My-New-Post/">My New Post</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-30</span><br />
		
		
	</div>

	

	
		
	

	

</article>




	<article>
	
		<h1><a href="/2022/04/30/hello-world/">JVM深入理解JAVA虚拟机</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-30</span><br />
		
		
	</div>

	

	
		<h1 id="一、JAVA内存区域与内存溢出异常"><a href="#一、JAVA内存区域与内存溢出异常" class="headerlink" title="一、JAVA内存区域与内存溢出异常"></a>一、JAVA内存区域与内存溢出异常</h1><h2 id="1-1概述"><a href="#1-1概述" class="headerlink" title="1.1概述"></a>1.1概述</h2><p>​	对于JAVA程序员来说，在虚拟机自动内存管理机制的帮助下，不再需要为每一个new操作去写配对的delete&#x2F;free代码，不容易出现内存泄露和内存溢出问题，由虚拟机管理内存让一切都看起来很美好。不过，也正是因为JAVA程序员把内存控制的权利交给了JAVA虚拟机，一旦出现内存泄漏和溢出方面的问题，如果不了解虚拟机是怎样使用内存的，那么排查错误将成为一项异常艰难的工作。</p>
<h2 id="1-2运行时数据区域"><a href="#1-2运行时数据区域" class="headerlink" title="1.2运行时数据区域"></a>1.2运行时数据区域</h2><p>​	JAVA虚拟机在执行JAVA程序的过程中会把它所管理的内存化为若干个不同的数据区域。这些区域都有各自的用途，以及创建和销毁的时间，有的区域随着虚拟机进程的启动而存在，有些区域则依赖用户线程的启动和结束而建立和销毁，根据最新的JAVA虚拟机规范的规定，JAVA虚拟机所管理的内存将会包括以下几个运行时数据区域，如图所示1-1所示。<figure class="figure"><img src="E:\研究生\工作\blog\myblog\public\img\jvm1-1.png"></figure></p>
<h3 id="1-2-1程序计数器"><a href="#1-2-1程序计数器" class="headerlink" title="1.2.1程序计数器"></a>1.2.1程序计数器</h3><p>​	程序计数器是一块较小的内存空间，它可以看作是当前线程所执行的字节码的行号指示器。在虚拟机的概念模型里，字节码解释器工作时就是通过改变这个计数器的值来选取下一条需要执行的字节码指令，分支、循环、跳转、异常处理、线程恢复等基础功能都需要以来这个计数器来完成。</p>
<p>​	由于JAVA虚拟机的多线程是通过线程轮流切换并分配执行器执行时间的方式来实现的，在任何一个确定的时刻，一个处理器（对于多核处理器来说是一个内核）都会执行一条线程中的指令。因此，为了线程切换后能恢复到正确的执行位置，每个线程都需要有一个独立的程序计数器。各条线程之间计数器互不影响，独立存储，我们称这类内存区域为“线程私有”的内存。</p>
<p>​	如果线程正在实行的是一个JAVA方法，这个计数器记录的是正在执行的虚拟机字节码指令的地址；如果正在执行的是Native方法，这个计数器值则为空（Undefined）。此内存区域是唯一一个在JAVA虚拟机规范中没有任何规定OOM情况的区域。</p>
<ul>
<li>作用<ul>
<li>为当前线程标识所要执行的字节码行号。</li>
<li>实现执行过程中分支、循环、跳转、异常处理、线程回复等基础功能。</li>
</ul>
</li>
<li>特点<ul>
<li>每个线程私有.</li>
<li>不存在OOM情况。</li>
</ul>
</li>
</ul>
<h3 id="1-2-2JAVA虚拟机栈"><a href="#1-2-2JAVA虚拟机栈" class="headerlink" title="1.2.2JAVA虚拟机栈"></a>1.2.2JAVA虚拟机栈</h3><p>​	虚拟机栈与程序计数器一样，也是线程私有的，其生命周期和线程相同，虚拟机栈描述的是JAVA方法执行的内存模型，<strong>每个方法在执行时都会创建一个栈帧用于存储局部变量表、操作数栈、动态链接和方法出口等信息</strong>，每个方法从调用直至执行完成的过程，就对应着一个栈桢在虚拟机栈中从入栈到出栈的过程。</p>
<p>​	所谓的栈即当前讲的虚拟机栈，具体指的就是虚拟机栈中的局部变量表部分。局部变量表存放了编译器可知的各种基本数据类型（boolean、byte、char、short、int、flout、long、double）、对象引用（不等同于对象本身，可能是一个指向对象起始位置的指针，也可能是指向一个代表对象的句柄等等）和returnAddress类型（指向了一条字节码指令的地址）。其中64位长度的long和double类型的数据会占用2个局部变量空间，其余数据类型会占一个。局部变量表的大小在编译期间完成分配，当进入一个方法是，这个方法需要在帧中分配多大的局部变量空间完全确定，在方法运行期间不会改变局部变量表的大小。</p>
<p>​	在JAVA虚拟机规范中，对这个去规定了两种异常情况，如果线程请求的栈深度大雨虚拟机所允许的最大深度，将抛出StackOverflowErrory异常；如果虚拟机可以动态扩展，但扩展时无法申请到足够的内存，就会抛出OutOfMemoryError异常。</p>
<ul>
<li>作用<ul>
<li>为当前方法提供内存空间，存储局部变量表、操作数栈、动态链接和方法出口等信息。包含的数据类型有基础数据类型、所引用对象的引用指针。</li>
</ul>
</li>
<li>特点<ul>
<li>局部变量表大小在编译期间确定，方法运行时不会改变。</li>
<li>会出现溢出情况。<ul>
<li>StackOverflowErrory：栈深度大于当前虚拟机所允许的最大深度时抛出。</li>
<li>OutOfMemoryError：当虚拟机可以动态扩展但无法申请到足够的内存时抛出。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-2-3本地方法栈"><a href="#1-2-3本地方法栈" class="headerlink" title="1.2.3本地方法栈"></a>1.2.3本地方法栈</h3><p>​	本地方法栈与虚拟机栈所发挥的作用极其相似，它们之间的差别时虚拟机栈执行的是JAVA方法（也就是字节码）服务，而本地方法栈则为虚拟机执行的Native方法服务，本地方法栈中方法使用的语言、使用方式与数据结构没有强制规定。在有些虚拟机中，会把本地方法栈和虚拟机栈合二为一。与虚拟机栈一样，本地方法栈区域也会抛出StackOverflowErrory和OutOfMemoryError异常。</p>
<h3 id="1-2-4JAVA堆"><a href="#1-2-4JAVA堆" class="headerlink" title="1.2.4JAVA堆"></a>1.2.4JAVA堆</h3><p>​	</p>

	

	

</article>






	<span class="different-posts">📕 end of posts 📕</span>


	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<p>Hi there, <br />welcome to my Blog glad you found it. Have a look around, will you?</p>
</div>

	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>© 2022 Fresh Y | Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> | Theme <a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a></span>
		</div>

	</div>


</footer>



</body>

</html>
